local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/jensonhirst/Orion/main/source'))()

local Window = OrionLib:MakeWindow({Name = "WeroHub", HidePremium = false, SaveConfig = true, ConfigFolder = "WeroHubConfig"})

local StealTab = Window:MakeTab({
	Name = "Steal a Brainrot",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local ESPTab = Window:MakeTab({
    Name = "ESP Brainrots",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local respawnConnection
local originalJumpPower

StealTab:AddToggle({
    Name = "Jump Boost 100 Bypass",
    Default = false,
    Callback = function(enabled)
        local function applyJumpBoost()
            local char = player.Character
            if not char then return end
            local humanoid = char:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.UseJumpPower = true
                originalJumpPower = originalJumpPower or humanoid.JumpPower
                humanoid.JumpPower = 100
                humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping, true)
                humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall, true)
            end
        end

        local function removeJumpBoost()
            local char = player.Character
            if not char then return end
            local humanoid = char:FindFirstChildOfClass("Humanoid")
            if humanoid and originalJumpPower then
                humanoid.JumpPower = originalJumpPower
            end
        end

        if enabled then
            applyJumpBoost()

            -- Reaplicar al respawn
            respawnConnection = player.CharacterAdded:Connect(function(char)
                char:WaitForChild("Humanoid")
                task.wait(0.2)
                applyJumpBoost()
            end)
        else
            removeJumpBoost()

            if respawnConnection then
                respawnConnection:Disconnect()
                respawnConnection = nil
            end
        end
    end
})

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local espEnabled = false
local espConnections = {}
local highlights = {}

local function createBillboard(player)
    local char = player.Character
    if not char then return end
    local head = char:FindFirstChild("Head")
    if not head then return end

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP_Billboard"
    billboard.Adornee = head
    billboard.AlwaysOnTop = true
    billboard.Size = UDim2.new(0, 150, 0, 40)
    billboard.StudsOffset = Vector3.new(0, 2, 0)
    billboard.Parent = head

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = player.Name
    label.TextColor3 = Color3.new(0, 1, 0)
    label.TextStrokeTransparency = 0
    label.TextScaled = true
    label.Font = Enum.Font.GothamBold
    label.Parent = billboard

    return billboard
end

local function createHighlight(char)
    local highlight = Instance.new("Highlight")
    highlight.Name = "ESP_Highlight"
    highlight.FillColor = Color3.fromRGB(0, 255, 0)
    highlight.OutlineColor = Color3.fromRGB(0, 255, 0)
    highlight.Adornee = char
    highlight.Parent = char
    return highlight
end

local function setupCharacter(player, char)
    if not char then return end

    if not char:FindFirstChild("ESP_Billboard") and char:FindFirstChild("Head") then
        createBillboard(player)
    end

    if not char:FindFirstChild("ESP_Highlight") then
        highlights[player] = createHighlight(char)
    end

    for _, part in pairs(char:GetChildren()) do
        if part:IsA("BasePart") then
            part.LocalTransparencyModifier = 0.5
        end
    end
end

local function enableESP()
    espEnabled = true

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            if player.Character then
                setupCharacter(player, player.Character)
            end
            espConnections[player] = player.CharacterAdded:Connect(function(char)
                if espEnabled then
                    setupCharacter(player, char)
                end
            end)
        end
    end

    espConnections["PlayerAdded"] = Players.PlayerAdded:Connect(function(player)
        if player ~= localPlayer and espEnabled then
            espConnections[player] = player.CharacterAdded:Connect(function(char)
                if espEnabled then
                    setupCharacter(player, char)
                end
            end)
        end
    end)
end

local function disableESP()
    espEnabled = false

    for key, conn in pairs(espConnections) do
        if typeof(conn) == "RBXScriptConnection" then
            conn:Disconnect()
        end
        espConnections[key] = nil
    end

    for _, player in pairs(Players:GetPlayers()) do
        local char = player.Character
        if char then
            local billboard = char:FindFirstChild("Head") and char.Head:FindFirstChild("ESP_Billboard")
            if billboard then
                billboard:Destroy()
            end

            if highlights[player] then
                highlights[player]:Destroy()
                highlights[player] = nil
            end

            for _, part in pairs(char:GetChildren()) do
                if part:IsA("BasePart") then
                    part.LocalTransparencyModifier = 0
                end
            end
        end
    end
end

-- Asumiendo que tienes la variable StealTab creada y es la pesta√±a correcta:
StealTab:AddToggle({
    Name = "ESP",
    Default = false,
    Callback = function(active)
        if active then
            enableESP()
            print("ESP Activado")
        else
            disableESP()
            print("ESP Desactivado")
        end
    end
})
