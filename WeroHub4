local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- Variables para guardar estado
local originalWalkSpeed = 34
local boostedWalkSpeed = 60
local speedToggle = false

local spawnPos = hrp.Position

-- Crear ScreenGui para botones
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BypassButtonsGui"
screenGui.Parent = playerGui

-- Crear botones (invisibles al inicio)
local flyButton = Instance.new("TextButton")
flyButton.Size = UDim2.new(0, 160, 0, 40)
flyButton.Position = UDim2.new(0.5, -80, 0.7, 0)
flyButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
flyButton.TextColor3 = Color3.new(1,1,1)
flyButton.Font = Enum.Font.GothamBold
flyButton.TextSize = 18
flyButton.Text = "Fly to Spawn"
flyButton.Visible = false
flyButton.Parent = screenGui

local instantTPButton = flyButton:Clone()
instantTPButton.Position = UDim2.new(0.5, -80, 0.62, 0)
instantTPButton.Text = "Teleport Up 80 (Bypass TP)"
instantTPButton.Visible = false
instantTPButton.Parent = screenGui

-- Función para setear velocidad (bypass básico)
local function setSpeed(speed)
    if humanoid then
        humanoid.WalkSpeed = speed
    end
end

-- Función para volar hacia una posición (con BodyVelocity)
local function flyToPosition(targetPos)
    if not hrp or not hrp.Parent then return end

    local bv = Instance.new("BodyVelocity")
    bv.MaxForce = Vector3.new(1e5,1e5,1e5)
    bv.Velocity = Vector3.new(0,0,0)
    bv.Parent = hrp

    local flying = true

    RunService:BindToRenderStep("FlyBypass", 301, function()
        if not flying or not hrp or not hrp.Parent then
            flying = false
            RunService:UnbindFromRenderStep("FlyBypass")
            bv:Destroy()
            return
        end
        local direction = (targetPos - hrp.Position)
        local dist = direction.Magnitude
        if dist < 1 then
            flying = false
            RunService:UnbindFromRenderStep("FlyBypass")
            bv:Destroy()
            return
        end
        bv.Velocity = direction.Unit * 59
    end)
end

-- Función para teleportar arriba con tween (bypass)
local function teleportUpBypass()
    if not hrp or not hrp.Parent then return end

    local targetPos = hrp.Position + Vector3.new(0, 80, 0)

    local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Linear)
    local tween = TweenService:Create(hrp, tweenInfo, {CFrame = CFrame.new(targetPos)})
    tween:Play()
    tween.Completed:Wait()
end

-- Actualizar referencias al respawnear
local function onCharacterAdded(char)
    character = char
    hrp = character:WaitForChild("HumanoidRootPart")
    humanoid = character:WaitForChild("Humanoid")
    
    -- Restaurar velocidad si toggle está activo
    if speedToggle then
        setSpeed(boostedWalkSpeed)
    else
        setSpeed(originalWalkSpeed)
    end
    
    -- Actualizar spawnPos al reaparecer
    spawnPos = hrp.Position
end

player.CharacterAdded:Connect(onCharacterAdded)

-- Crear ventana y pestaña Rayfield
local Window = Rayfield:CreateWindow({
   Name = "WeroHub Steal a Brainrot",
   LoadingTitle = "WeroHub",
   LoadingSubtitle = "Speed & Teleport",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "WeroHubConfig"
   },
   Discord = { Enabled = false },
   KeySystem = false,
})

local Tab = Window:CreateTab("Main")

-- Toggle velocidad
Tab:CreateToggle({
    Name = "Speed Bypass (60)",
    CurrentValue = false,
    Flag = "SpeedToggle",
    Callback = function(value)
        speedToggle = value
        if speedToggle then
            setSpeed(boostedWalkSpeed)
        else
            setSpeed(originalWalkSpeed)
        end
    end
})

-- Toggle mostrar botón Fly to Spawn
local flyButtonToggle = false
Tab:CreateToggle({
    Name = "Show Fly to Spawn Button",
    CurrentValue = false,
    Flag = "FlyButtonToggle",
    Callback = function(value)
        flyButtonToggle = value
        flyButton.Visible = flyButtonToggle
        if flyButtonToggle then
            spawnPos = hrp.Position
        end
    end
})

-- Toggle mostrar botón Teleport Up 80
local instantTPButtonToggle = false
Tab:CreateToggle({
    Name = "Show Teleport Up 80 Button",
    CurrentValue = false,
    Flag = "InstantTPButtonToggle",
    Callback = function(value)
        instantTPButtonToggle = value
        instantTPButton.Visible = instantTPButtonToggle
    end
})

-- Conexión de botones
flyButton.MouseButton1Click:Connect(function()
    flyToPosition(spawnPos)
end)

instantTPButton.MouseButton1Click:Connect(function()
    teleportUpBypass()
end)
